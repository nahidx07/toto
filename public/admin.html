<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Toto Pro Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg: #05070A; --drawer: #0D1117; --card: #161B22; --red: #E21E26; --border: rgba(255,255,255,0.08); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; font-family: 'Hind Siliguri', sans-serif; overflow: hidden; height: 100vh; }
        #login-page { position: fixed; inset: 0; background: var(--bg); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-card { background: var(--card); width: 350px; padding: 30px; border-radius: 20px; border: 1px solid var(--border); text-align: center; }
        header { padding: 15px 20px; background: var(--drawer); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; position: fixed; top: 0; width: 100%; z-index: 1000; }
        .drawer { position: fixed; top: 0; left: -260px; width: 260px; height: 100%; background: var(--drawer); border-right: 1px solid var(--border); z-index: 2000; transition: 0.4s; }
        .drawer.open { left: 0; }
        .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1500; display: none; }
        .drawer-overlay.active { display: block; }
        .nav-item { padding: 15px 20px; cursor: pointer; color: #8B949E; }
        .nav-item.active { background: rgba(226,30,38,0.1); color: var(--red); border-left: 4px solid var(--red); }
        .main { padding: 80px 15px; height: 100vh; overflow-y: auto; }
        .content { display: none; }
        .content.active { display: block; }
        .card { background: var(--card); border-radius: 15px; padding: 20px; border: 1px solid var(--border); margin-bottom: 20px; }
        input { width: 100%; padding: 12px; background: #000; border: 1px solid var(--border); border-radius: 8px; color: #fff; margin-bottom: 10px; }
        .btn { padding: 12px; background: var(--red); color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
    </style>
</head>
<body>

    <div id="login-page">
        <div class="login-card"><h2>Admin</h2><br><input type="email" id="email" placeholder="Email"><input type="password" id="pass" placeholder="Pass"><button class="btn" onclick="login()">Login</button></div>
    </div>

    <div id="admin-ui" style="display:none;">
        <div class="drawer-overlay" id="overlay" onclick="toggleMenu()"></div>
        <div class="drawer" id="drawer">
            <div style="padding:20px;"><h2>TOTO PRO</h2></div>
            <div class="nav-item active" onclick="switchP('dash', this)">üè† ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</div>
            <div class="nav-item" onclick="switchP('matches', this)">üî¥ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö</div>
            <div class="nav-item" onclick="switchP('members', this)">üë• ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞</div>
            <div class="nav-item" onclick="switchP('sets', this)">‚öôÔ∏è ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</div>
            <div class="nav-item" style="color:red; margin-top:20px;" onclick="location.reload()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</div>
        </div>
        <header><div onclick="toggleMenu()" style="cursor:pointer">‚ò∞ ‡¶Æ‡ßá‡¶®‡ßÅ</div><strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</strong></header>

        <div class="main">
            <div id="dash" class="content active">
                <div class="card">‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ: <h2 id="u-count">0</h2></div>
            </div>
            <div id="matches" class="content">
                <div class="card">
                    <h3>‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶è‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3><br>
                    <input type="text" id="m-title" placeholder="‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">
                    <input type="text" id="m-thumb" placeholder="‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤ URL">
                    <input type="text" id="m-url" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶Æ‡ßç‡¶¨‡ßá‡¶° ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï">
                    <button class="btn" onclick="addMatch()">‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂</button>
                </div>
                <h3>‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h3><div id="m-list-adm"></div>
            </div>
            <div id="members" class="content">
                <div class="card"><h3>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3><div id="u-list-adm"></div></div>
            </div>
            <div id="sets" class="content">
                <div class="card"><label>‡¶≤‡ßã‡¶ó‡ßã URL</label><input type="text" id="set-logo"><button class="btn" onclick="db.ref('settings').update({logoUrl: document.getElementById('set-logo').value})">‡¶∏‡ßá‡¶≠</button></div>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAmdXx4PAETjr42lpSbTR6sb5H0WqUyzoo",
            authDomain: "totolive-6689f.firebaseapp.com",
            databaseURL: "https://totolive-6689f-default-rtdb.firebaseio.com",
            projectId: "totolive-6689f",
            storageBucket: "totolive-6689f.firebasestorage.app",
            messagingSenderId: "423841122771",
            appId: "1:423841122771:web:ad3c529d8dc9833a69c726"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); const db = firebase.database();

        function login() {
            auth.signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('pass').value)
                .then(() => { document.getElementById('login-page').style.display='none'; document.getElementById('admin-ui').style.display='block'; initAdmin(); })
                .catch(e => alert(e.message));
        }

        function initAdmin() {
            db.ref('users').on('value', s => {
                const u = s.val(); document.getElementById('u-count').innerText = s.numChildren();
                const cont = document.getElementById('u-list-adm'); cont.innerHTML = '';
                for(let id in u) cont.innerHTML += `<div class="card" style="padding:10px; display:flex; justify-content:space-between"><span>${u[id].name}</span><button onclick="db.ref('users/${id}').remove()" style="background:red; border:none; color:#fff; padding:5px; border-radius:5px;">Del</button></div>`;
            });
            db.ref('matches').on('value', s => {
                const m = s.val(); const cont = document.getElementById('m-list-adm'); cont.innerHTML = '';
                for(let id in m) cont.innerHTML += `<div class="card" style="display:flex; justify-content:space-between"><span>${m[id].title}</span><button onclick="db.ref('matches/${id}').remove()" style="background:red; border:none; color:#fff; padding:5px; border-radius:5px;">Del</button></div>`;
            });
            db.ref('settings/logoUrl').on('value', s => document.getElementById('set-logo').value = s.val() || '');
        }

        function addMatch() {
            db.ref('matches').push({ title: document.getElementById('m-title').value, thumbnail: document.getElementById('m-thumb').value, videoUrl: document.getElementById('m-url').value, watching: 0 });
            alert("Added!");
        }

        function toggleMenu() { document.getElementById('drawer').classList.toggle('open'); document.getElementById('overlay').classList.toggle('active'); }
        function switchP(p, el) {
            document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
            document.getElementById(p).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
            el.classList.add('active'); toggleMenu();
        }
    </script>
</body>
</html>
