<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toto Stream - Pro Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg-color: #05070A; --drawer-bg: #0D1117; --card-bg: #161B22; --primary-red: #E21E26; --primary-yellow: #FFC107; --border-color: rgba(255,255,255,0.08); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg-color); color: #fff; font-family: 'Hind Siliguri', sans-serif; height: 100vh; overflow: hidden; }
        
        #login-page { position: fixed; inset: 0; background: var(--bg-color); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-card { background: var(--card-bg); width: 350px; padding: 30px; border-radius: 20px; border: 1px solid var(--border-color); text-align: center; }
        
        header { padding: 15px 20px; background: var(--drawer-bg); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; position: fixed; top: 0; width: 100%; z-index: 1000; }
        .drawer { position: fixed; top: 0; left: -280px; width: 260px; height: 100%; background: var(--drawer-bg); border-right: 1px solid var(--border-color); z-index: 2000; transition: 0.4s; }
        .drawer.open { left: 0; }
        .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1500; display: none; }
        .drawer-overlay.active { display: block; }
        
        .nav-item { padding: 15px 20px; cursor: pointer; color: #8B949E; display: flex; gap: 10px; }
        .nav-item.active { background: rgba(226,30,38,0.1); color: var(--primary-red); border-left: 4px solid var(--primary-red); }
        
        .main-container { padding: 80px 15px; height: 100vh; overflow-y: auto; }
        .page-content { display: none; }
        .page-content.active { display: block; }
        .admin-card { background: var(--card-bg); border-radius: 15px; padding: 20px; border: 1px solid var(--border-color); margin-bottom: 20px; }
        
        input { width: 100%; padding: 12px; background: #000; border: 1px solid var(--border-color); border-radius: 8px; color: #fff; margin-bottom: 10px; outline: none; }
        .btn { padding: 12px; background: var(--primary-red); color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; border-bottom: 1px solid var(--border-color); text-align: left; font-size: 14px; }
    </style>
</head>
<body>

    <div id="login-page">
        <div class="login-card">
            <h2>Admin Login</h2><br>
            <input type="email" id="email" placeholder="Email">
            <input type="password" id="pass" placeholder="Password">
            <button class="btn" onclick="login()">Login</button>
        </div>
    </div>

    <div id="admin-ui" style="display:none;">
        <div class="drawer-overlay" id="overlay" onclick="toggleMenu()"></div>
        <div class="drawer" id="drawer">
            <div style="padding:20px;"><h2 style="color:var(--primary-red)">TOTO PRO</h2></div>
            <div class="nav-item active" onclick="switchP('dash', this)">üè† ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</div>
            <div class="nav-item" onclick="switchP('matches', this)">üî¥ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö</div>
            <div class="nav-item" onclick="switchP('members', this)">üë• ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</div>
            <div class="nav-item" onclick="switchP('settings', this)">‚öôÔ∏è ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</div>
            <div class="nav-item" style="margin-top:20px; color:red" onclick="location.reload()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</div>
        </div>
        
        <header><div onclick="toggleMenu()" style="cursor:pointer">‚ò∞ ‡¶Æ‡ßá‡¶®‡ßÅ</div><strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</strong></header>

        <div class="main-container">
            <div id="dash" class="page-content active">
                <div class="admin-card">‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: <h2 id="u-count">0</h2></div>
                <div class="admin-card">‡¶Æ‡ßã‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö: <h2 id="m-count">0</h2></div>
            </div>

            <div id="matches" class="page-content">
                <div class="admin-card">
                    <h3>‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö ‡¶è‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3><br>
                    <input type="text" id="m-title" placeholder="‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">
                    <input type="text" id="m-thumb" placeholder="‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï">
                    <input type="text" id="m-url" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (Iframe)">
                    <button class="btn" onclick="addMatch()">‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                <h3>‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                <div id="match-list-admin"></div>
            </div>

            <div id="members" class="page-content">
                <div class="admin-card">
                    <h3>‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                    <table>
                        <thead><tr><th>‡¶®‡¶æ‡¶Æ</th><th>XP</th><th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th></tr></thead>
                        <tbody id="user-table"></tbody>
                    </table>
                </div>
            </div>

            <div id="settings" class="page-content">
                <div class="admin-card">
                    <h3>‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                    <label>‡¶≤‡ßã‡¶ó‡ßã URL</label><input type="text" id="set-logo">
                    <button class="btn" onclick="db.ref('settings').update({logoUrl: document.getElementById('set-logo').value})">‡¶∏‡ßá‡¶≠</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAmdXx4PAETjr42lpSbTR6sb5H0WqUyzoo",
            authDomain: "totolive-6689f.firebaseapp.com",
            databaseURL: "https://totolive-6689f-default-rtdb.firebaseio.com",
            projectId: "totolive-6689f",
            storageBucket: "totolive-6689f.firebasestorage.app",
            messagingSenderId: "423841122771",
            appId: "1:423841122771:web:ad3c529d8dc9833a69c726"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); const db = firebase.database();

        function login() {
            auth.signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('pass').value)
                .then(() => { document.getElementById('login-page').style.display='none'; document.getElementById('admin-ui').style.display='block'; initAdmin(); })
                .catch(e => alert(e.message));
        }

        function initAdmin() {
            db.ref('users').on('value', s => {
                const u = s.val(); document.getElementById('u-count').innerText = s.numChildren();
                const tb = document.getElementById('user-table'); tb.innerHTML = '';
                for(let id in u) tb.innerHTML += `<tr><td>${u[id].name}</td><td>${u[id].xp}</td><td><button onclick="db.ref('users/${id}').remove()">Del</button></td></tr>`;
            });
            db.ref('matches').on('value', s => {
                const m = s.val(); document.getElementById('m-count').innerText = s.numChildren();
                const cont = document.getElementById('match-list-admin'); cont.innerHTML = '';
                for(let id in m) cont.innerHTML += `<div class="admin-card" style="display:flex; justify-content:space-between"><span>${m[id].title}</span><button onclick="db.ref('matches/${id}').remove()">Delete</button></div>`;
            });
            db.ref('settings/logoUrl').on('value', s => document.getElementById('set-logo').value = s.val() || '');
        }

        function addMatch() {
            db.ref('matches').push({
                title: document.getElementById('m-title').value,
                thumbnail: document.getElementById('m-thumb').value,
                videoUrl: document.getElementById('m-url').value,
                watching: 0
            }).then(() => alert("Added!"));
        }

        function toggleMenu() { document.getElementById('drawer').classList.toggle('open'); document.getElementById('overlay').classList.toggle('active'); }
        function switchP(p, el) {
            document.querySelectorAll('.page-content').forEach(c=>c.classList.remove('active'));
            document.getElementById(p).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
            el.classList.add('active'); toggleMenu();
        }
    </script>
</body>
</html>
